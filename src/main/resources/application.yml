spring:
  application:
    name: nexus-aggregate
  threads:
    virtual:
      enabled: true
  data:
    redis:
      host: localhost
      port: 6379
  cache:
    type: redis
    redis:
      time-to-live: 60000

nexus:
  sources:
    - name: "alphaVantage"
      url: "https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol={ticker}&apikey=${ALPHA_VANTAGE_API_KEY}"
      enabled: true
    - name: "finnhub"
      url: "https://finnhub.io/api/v1/quote?symbol={ticker}&token=${FINNHUB_API_KEY}"
      enabled: true

resilience4j:
  circuitbreaker:
    instances:
      alphaVantage:
        register-health-indicator: true
        sliding-window-size: 10
        failure-rate-threshold: 50
        wait-duration-in-open-state: 10s
      finnhub:
        register-health-indicator: true
        sliding-window-size: 10
        failure-rate-threshold: 50
        wait-duration-in-open-state: 10s

management:
  endpoints:
    web:
      exposure:
        include: health,info,circuitbreakers
  endpoint:
    health:
      show-details: always